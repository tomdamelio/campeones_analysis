## ğŸ“… Martes 20 de mayo de 2025 â€“ Plan de trabajo tÃ©cnico

### ğŸ¯ Objetivo general del dÃ­a (6/7 hs)
Completar la definiciÃ³n de arquitectura de manejo de datos y avanzar en la inspecciÃ³n de calidad de seÃ±ales fisiolÃ³gicas y marcas de eventos en el primer participante del estudio.

---

#### ğŸ”§ Definir arquitectura de manejo de datos (EEG + fisiologÃ­a)

- **Estructura de carpetas (BIDS 1.10):**
  - Los archivos originales `.xdf` se almacenan en `data/sourcedata/xdf/`.
  - Los datos crudos convertidos a formato BIDS (BrainVision `.vhdr`) se guardan en `data/raw/`, siguiendo la estructura estÃ¡ndar BIDS (`sub-XX/ses-YY/eeg/`).
  - Todos los resultados de procesamiento y anÃ¡lisis (sincronÃ­a, limpieza, features, fusiÃ³n) se almacenan en `data/derivatives/`, organizados por pipeline y modalidad.

- **Pipeline resumido:**
  1. **Ingesta:**
     - Leer `.xdf` desde `data/sourcedata/xdf/`.
     - Remapear canales y convertir a BrainVision en `data/raw/`.
     - Documentar el mapeo y unidades en `channels.tsv`.
  2. **SincronÃ­a y resample:**
     - Resamplear a 250 Hz.
     - Detectar eventos (foto/audio) y guardar anotaciones/eventos en `events.tsv`.
     - Guardar resultado en `data/derivatives/preproc/` con sufijo `desc-sync_proc-eeg.fif`.
  3. **Limpieza:**
     - Aplicar filtros, ICA y marcar artefactos.
     - Guardar archivos limpios y logs de ICA en `data/derivatives/preproc/`.
  4. **SegmentaciÃ³n:**
     - Crear epochs largos (1â€“4 min) segÃºn eventos.
     - Guardar epochs en `data/derivatives/preproc/`.
  5. **Features:**
     - Extraer mÃ©tricas por modalidad y guardar en `data/derivatives/features/<mod>/`.
  6. **FusiÃ³n multimodal:**
     - Unificar features en tablas tidy para anÃ¡lisis/ML en `data/derivatives/features/multimodal/`.

- **Trazabilidad y documentaciÃ³n:**
  - Todos los derivados llevan sidecar JSON con informaciÃ³n de pipeline y parÃ¡metros clave.
  - Se sigue la nomenclatura BIDS para todos los archivos y carpetas.
  - Se recomienda mantener logs de procesamiento y versiones de scripts.

- **Ejemplo de Ã¡rbol de carpetas:**
  ```
  data/
  â”œâ”€â”€ sourcedata/
  â”‚   â””â”€â”€ xdf/
  â”œâ”€â”€ raw/
  â”‚   â””â”€â”€ sub-XX/ses-YY/eeg/...
  â””â”€â”€ derivatives/
      â”œâ”€â”€ preproc/
      â”œâ”€â”€ features/
      â”‚   â”œâ”€â”€ eeg/ ecg/ eda/ resp/ acc/ behav/
      â”‚   â””â”€â”€ multimodal/
      â””â”€â”€ ...
  ```

- **Referencias:**
  - Ver detalles y convenciones completas en `docs/arquitectura_datos.md`.

SEGUIR DESDE ACA:
Revisar lo que me propuso como test Cursor en `convert_xdf_to_bids.py`.
Editarlo, de acuerdo a los datos que tnego. Fijarme si el mapeo de canales esta bien (o editarlo, de acuerod a lo que ya hice en su momento). Le puedo dar a cursor el mapepo de canales que ya hicimos en su momento para uqe mapee el. Decirle que me lo testee con un participante

#### ğŸ” InspecciÃ³n de seÃ±ales fisiolÃ³gicas y marcas â€“ Sujeto 1

- [ ] Cargar y visualizar datos fisiolÃ³gicos (ECG, respiraciÃ³n, EDA si aplica).
- [ ] Verificar calidad de seÃ±ales: artefactos, cortes, ruido.
- [ ] Inspeccionar marcas de eventos (audio y fotosensor):
  - Confirmar presencia y sincronÃ­a de eventos de inicio y fin de estÃ­mulos.
- [ ] Anotar hallazgos y observaciones en log individual del sujeto.
- [ ] Extender este analisis para los sujetos 1.

---

### ğŸ“ Outputs esperados

- Archivo `arquitectura_datos.md` completo.
- Notas de inspecciÃ³n de fisiologÃ­a + marcas para el sujeto 1


### Tareas pendientes para maÃ±ana

- Extender este analisis a los otros 5 participantes
- Pipeline EEG â€“ RevisiÃ³n funcional
  - [ ] Cargar y ejecutar el pipeline de preprocesamiento EEG con un sujeto.
    - Asegurarse de que el flujo se ejecute sin errores.
    - Verificar outputs intermedios (por ejemplo: filtrado, ICA, segmentaciÃ³n).
  - [ ] Documentar estado del pipeline y ajustes necesarios.
