## 📅 Martes 20 de mayo de 2025 – Plan de trabajo técnico

### 🎯 Objetivo general del día (6/7 hs)
Completar la definición de arquitectura de manejo de datos y avanzar en la inspección de calidad de señales fisiológicas y marcas de eventos en el primer participante del estudio.

---

#### 🔧 Definir arquitectura de manejo de datos (EEG + fisiología)

- **Estructura de carpetas (BIDS 1.10):**
  - Los archivos originales `.xdf` se almacenan en `data/sourcedata/xdf/`.
  - Los datos crudos convertidos a formato BIDS (BrainVision `.vhdr`) se guardan en `data/raw/`, siguiendo la estructura estándar BIDS (`sub-XX/ses-YY/eeg/`).
  - Todos los resultados de procesamiento y análisis (sincronía, limpieza, features, fusión) se almacenan en `data/derivatives/`, organizados por pipeline y modalidad.

- **Pipeline resumido:**
  1. **Ingesta:**
     - Leer `.xdf` desde `data/sourcedata/xdf/`.
     - Remapear canales y convertir a BrainVision en `data/raw/`.
     - Documentar el mapeo y unidades en `channels.tsv`.
  2. **Sincronía y resample:**
     - Resamplear a 250 Hz.
     - Detectar eventos (foto/audio) y guardar anotaciones/eventos en `events.tsv`.
     - Guardar resultado en `data/derivatives/preproc/` con sufijo `desc-sync_proc-eeg.fif`.
  3. **Limpieza:**
     - Aplicar filtros, ICA y marcar artefactos.
     - Guardar archivos limpios y logs de ICA en `data/derivatives/preproc/`.
  4. **Segmentación:**
     - Crear epochs largos (1–4 min) según eventos.
     - Guardar epochs en `data/derivatives/preproc/`.
  5. **Features:**
     - Extraer métricas por modalidad y guardar en `data/derivatives/features/<mod>/`.
  6. **Fusión multimodal:**
     - Unificar features en tablas tidy para análisis/ML en `data/derivatives/features/multimodal/`.

- **Trazabilidad y documentación:**
  - Todos los derivados llevan sidecar JSON con información de pipeline y parámetros clave.
  - Se sigue la nomenclatura BIDS para todos los archivos y carpetas.
  - Se recomienda mantener logs de procesamiento y versiones de scripts.

- **Ejemplo de árbol de carpetas:**
  ```
  data/
  ├── sourcedata/
  │   └── xdf/
  ├── raw/
  │   └── sub-XX/ses-YY/eeg/...
  └── derivatives/
      ├── preproc/
      ├── features/
      │   ├── eeg/ ecg/ eda/ resp/ acc/ behav/
      │   └── multimodal/
      └── ...
  ```

- **Referencias:**
  - Ver detalles y convenciones completas en `docs/arquitectura_datos.md`.

SEGUIR DESDE ACA:
Revisar lo que me propuso como test Cursor en `convert_xdf_to_bids.py`.
Editarlo, de acuerdo a los datos que tnego. Fijarme si el mapeo de canales esta bien (o editarlo, de acuerod a lo que ya hice en su momento). Le puedo dar a cursor el mapepo de canales que ya hicimos en su momento para uqe mapee el. Decirle que me lo testee con un participante

#### 🔍 Inspección de señales fisiológicas y marcas – Sujeto 1

- [ ] Cargar y visualizar datos fisiológicos (ECG, respiración, EDA si aplica).
- [ ] Verificar calidad de señales: artefactos, cortes, ruido.
- [ ] Inspeccionar marcas de eventos (audio y fotosensor):
  - Confirmar presencia y sincronía de eventos de inicio y fin de estímulos.
- [ ] Anotar hallazgos y observaciones en log individual del sujeto.
- [ ] Extender este analisis para los sujetos 1.

---

### 📁 Outputs esperados

- Archivo `arquitectura_datos.md` completo.
- Notas de inspección de fisiología + marcas para el sujeto 1


### Tareas pendientes para mañana

- Extender este analisis a los otros 5 participantes
- Pipeline EEG – Revisión funcional
  - [ ] Cargar y ejecutar el pipeline de preprocesamiento EEG con un sujeto.
    - Asegurarse de que el flujo se ejecute sin errores.
    - Verificar outputs intermedios (por ejemplo: filtrado, ICA, segmentación).
  - [ ] Documentar estado del pipeline y ajustes necesarios.
